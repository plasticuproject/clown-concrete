"""twine_trusted_monkey_patch.py"""
import twine.__main__
import twine.repository
import requests
from urllib3 import disable_warnings


def disable_server_certificate_validation() -> None:
    """Monkey-patch Twine to disable SSL certificate verification."""
    original_init = requests.Session.__init__

    def new_init(self, *args, **kwargs):
        original_init(self, *args, **kwargs)
        # Disable SSL verification by default
        self.verify = False

    # Patch the requests session used by Twine to skip certificate validation
    requests.Session.__init__ = new_init

def main():
    disable_warnings()
    disable_server_certificate_validation()
    twine.__main__.main()

if __name__ == '__main__':
    main()
